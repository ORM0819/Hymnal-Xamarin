<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDA Hymnal - Cycle Songs</title>
</head>
<body>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const totalSongs = localStorage.getItem('totalSongs') || 0;
            let currentIndex = parseInt(localStorage.getItem('currentIndex') || '0', 10);

            // Increment index
            currentIndex += 1;

            // Check if we have gone through all songs
            if (currentIndex >= totalSongs) {
                // Reset index and redirect to index.html
                localStorage.removeItem('currentIndex');
                window.location.href = 'index.html';
            } else {
                // Update currentIndex in localStorage and redirect to the next song
                localStorage.setItem('currentIndex', currentIndex);
                const nextSongUrl = `image.html?image=${encodeURIComponent(localStorage.getItem('imageUrls')[currentIndex])}&title=${encodeURIComponent(localStorage.getItem('titles')[currentIndex])}&number=${encodeURIComponent(localStorage.getItem('numbers')[currentIndex])}`;
                
                // Redirect after 100 milliseconds
                setTimeout(() => {
                    window.location.href = nextSongUrl;
                }, 100);
            }
        });
    </script>
</body>
</html>
